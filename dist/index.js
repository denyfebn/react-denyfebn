"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initServer = initServer;
exports.logger = void 0;
var _wppconnect = require("@wppconnect-team/wppconnect");
var _cors = _interopRequireDefault(require("cors"));
var _express = _interopRequireDefault(require("express"));
var _expressQueryBoolean = _interopRequireDefault(require("express-query-boolean"));
var _http = require("http");
var _mergeDeep = _interopRequireDefault(require("merge-deep"));
var _process = _interopRequireDefault(require("process"));
var _socket = require("socket.io");
var _package = require("../package.json");
var _config = _interopRequireDefault(require("./config"));
var _index = require("./mapper/index");
var _routes = _interopRequireDefault(require("./routes"));
var _functions = require("./util/functions");
var _logger = require("./util/logger");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/*
 * Copyright 2021 WPPConnect Team
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//require('dotenv').config();

const logger = exports.logger = (0, _logger.createLogger)(_config.default.log);
function initServer(serverOptions) {
  if (typeof serverOptions !== 'object') {
    serverOptions = {};
  }
  serverOptions = (0, _mergeDeep.default)({}, _config.default, serverOptions);
  _wppconnect.defaultLogger.level = serverOptions?.log?.level ? serverOptions.log.level : 'silly';
  (0, _functions.setMaxListners)(serverOptions);
  const app = (0, _express.default)();
  const PORT = _process.default.env.PORT || serverOptions.port;
  app.use((0, _cors.default)());
  app.use(_express.default.json({
    limit: '50mb'
  }));
  app.use(_express.default.urlencoded({
    limit: '50mb',
    extended: true
  }));
  app.use('/files', _express.default.static('WhatsAppImages'));
  app.use((0, _expressQueryBoolean.default)());
  if (_config.default?.aws_s3?.access_key_id && _config.default?.aws_s3?.secret_key) {
    _process.default.env['AWS_ACCESS_KEY_ID'] = _config.default.aws_s3.access_key_id;
    _process.default.env['AWS_SECRET_ACCESS_KEY'] = _config.default.aws_s3.secret_key;
  }

  // Add request options
  app.use((req, res, next) => {
    req.serverOptions = serverOptions;
    req.logger = logger;
    req.io = io;
    const oldSend = res.send;
    res.send = async function (data) {
      const content = req.headers['content-type'];
      if (content == 'application/json') {
        data = JSON.parse(data);
        if (!data.session) data.session = req.client ? req.client.session : '';
        if (data.mapper && req.serverOptions.mapper.enable) {
          data.response = await (0, _index.convert)(req.serverOptions.mapper.prefix, data.response, data.mapper);
          delete data.mapper;
        }
      }
      res.send = oldSend;
      return res.send(data);
    };
    next();
  });
  app.use(_routes.default);
  (0, _functions.createFolders)();
  const http = (0, _http.createServer)(app);
  const io = new _socket.Server(http, {
    cors: {
      origin: '*'
    }
  });
  io.on('connection', sock => {
    logger.info(`ID: ${sock.id} entrou`);
    sock.on('disconnect', () => {
      logger.info(`ID: ${sock.id} saiu`);
    });
  });
  http.listen(PORT, () => {
    logger.info(`Server is running on port: ${PORT}`);
    logger.info(`\x1b[31m Visit ${serverOptions.host}:${PORT}/api-docs for Swagger docs`);
    logger.info(`WPPConnect-Server version: ${_package.version}`);
    if (serverOptions.startAllSession) (0, _functions.startAllSessions)(serverOptions, logger);
  });
  if (_config.default.log.level === 'error' || _config.default.log.level === 'warn') {
    console.log(`\x1b[33m ======================================================
Attention:
Your configuration is configured to show only a few logs, before opening an issue, 
please set the log to 'silly', copy the log that shows the error and open your issue.
======================================================
`);
  }
  return {
    app,
    routes: _routes.default,
    logger
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd3BwY29ubmVjdCIsInJlcXVpcmUiLCJfY29ycyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZXhwcmVzcyIsIl9leHByZXNzUXVlcnlCb29sZWFuIiwiX2h0dHAiLCJfbWVyZ2VEZWVwIiwiX3Byb2Nlc3MiLCJfc29ja2V0IiwiX3BhY2thZ2UiLCJfY29uZmlnIiwiX2luZGV4IiwiX3JvdXRlcyIsIl9mdW5jdGlvbnMiLCJfbG9nZ2VyIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwibG9nZ2VyIiwiZXhwb3J0cyIsImNyZWF0ZUxvZ2dlciIsImNvbmZpZyIsImxvZyIsImluaXRTZXJ2ZXIiLCJzZXJ2ZXJPcHRpb25zIiwibWVyZ2VEZWVwIiwiZGVmYXVsdExvZ2dlciIsImxldmVsIiwic2V0TWF4TGlzdG5lcnMiLCJhcHAiLCJleHByZXNzIiwiUE9SVCIsInByb2Nlc3MiLCJlbnYiLCJwb3J0IiwidXNlIiwiY29ycyIsImpzb24iLCJsaW1pdCIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsImJvb2xQYXJzZXIiLCJhd3NfczMiLCJhY2Nlc3Nfa2V5X2lkIiwic2VjcmV0X2tleSIsInJlcSIsInJlcyIsIm5leHQiLCJpbyIsIm9sZFNlbmQiLCJzZW5kIiwiZGF0YSIsImNvbnRlbnQiLCJoZWFkZXJzIiwiSlNPTiIsInBhcnNlIiwic2Vzc2lvbiIsImNsaWVudCIsIm1hcHBlciIsImVuYWJsZSIsInJlc3BvbnNlIiwiY29udmVydCIsInByZWZpeCIsInJvdXRlcyIsImNyZWF0ZUZvbGRlcnMiLCJodHRwIiwiY3JlYXRlU2VydmVyIiwiU29ja2V0Iiwib3JpZ2luIiwib24iLCJzb2NrIiwiaW5mbyIsImlkIiwibGlzdGVuIiwiaG9zdCIsInZlcnNpb24iLCJzdGFydEFsbFNlc3Npb24iLCJzdGFydEFsbFNlc3Npb25zIiwiY29uc29sZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjEgV1BQQ29ubmVjdCBUZWFtXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGRlZmF1bHRMb2dnZXIgfSBmcm9tICdAd3BwY29ubmVjdC10ZWFtL3dwcGNvbm5lY3QnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcywgeyBFeHByZXNzLCBOZXh0RnVuY3Rpb24sIFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGJvb2xQYXJzZXIgZnJvbSAnZXhwcmVzcy1xdWVyeS1ib29sZWFuJztcbmltcG9ydCB7IGNyZWF0ZVNlcnZlciB9IGZyb20gJ2h0dHAnO1xuaW1wb3J0IG1lcmdlRGVlcCBmcm9tICdtZXJnZS1kZWVwJztcbmltcG9ydCBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xuaW1wb3J0IHsgU2VydmVyIGFzIFNvY2tldCB9IGZyb20gJ3NvY2tldC5pbyc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICd3aW5zdG9uJztcblxuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uL3BhY2thZ2UuanNvbic7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IGNvbnZlcnQgfSBmcm9tICcuL21hcHBlci9pbmRleCc7XG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJztcbmltcG9ydCB7IFNlcnZlck9wdGlvbnMgfSBmcm9tICcuL3R5cGVzL1NlcnZlck9wdGlvbnMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlRm9sZGVycyxcbiAgc2V0TWF4TGlzdG5lcnMsXG4gIHN0YXJ0QWxsU2Vzc2lvbnMsXG59IGZyb20gJy4vdXRpbC9mdW5jdGlvbnMnO1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi91dGlsL2xvZ2dlcic7XG5cbi8vcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBjcmVhdGVMb2dnZXIoY29uZmlnLmxvZyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0U2VydmVyKHNlcnZlck9wdGlvbnM6IFBhcnRpYWw8U2VydmVyT3B0aW9ucz4pOiB7XG4gIGFwcDogRXhwcmVzcztcbiAgcm91dGVzOiBSb3V0ZXI7XG4gIGxvZ2dlcjogTG9nZ2VyO1xufSB7XG4gIGlmICh0eXBlb2Ygc2VydmVyT3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICBzZXJ2ZXJPcHRpb25zID0ge307XG4gIH1cblxuICBzZXJ2ZXJPcHRpb25zID0gbWVyZ2VEZWVwKHt9LCBjb25maWcsIHNlcnZlck9wdGlvbnMpO1xuICBkZWZhdWx0TG9nZ2VyLmxldmVsID0gc2VydmVyT3B0aW9ucz8ubG9nPy5sZXZlbFxuICAgID8gc2VydmVyT3B0aW9ucy5sb2cubGV2ZWxcbiAgICA6ICdzaWxseSc7XG5cbiAgc2V0TWF4TGlzdG5lcnMoc2VydmVyT3B0aW9ucyBhcyBTZXJ2ZXJPcHRpb25zKTtcblxuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gIGNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IHNlcnZlck9wdGlvbnMucG9ydDtcblxuICBhcHAudXNlKGNvcnMoKSk7XG4gIGFwcC51c2UoZXhwcmVzcy5qc29uKHsgbGltaXQ6ICc1MG1iJyB9KSk7XG4gIGFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgbGltaXQ6ICc1MG1iJywgZXh0ZW5kZWQ6IHRydWUgfSkpO1xuICBhcHAudXNlKCcvZmlsZXMnLCBleHByZXNzLnN0YXRpYygnV2hhdHNBcHBJbWFnZXMnKSk7XG4gIGFwcC51c2UoYm9vbFBhcnNlcigpKTtcblxuICBpZiAoY29uZmlnPy5hd3NfczM/LmFjY2Vzc19rZXlfaWQgJiYgY29uZmlnPy5hd3NfczM/LnNlY3JldF9rZXkpIHtcbiAgICBwcm9jZXNzLmVudlsnQVdTX0FDQ0VTU19LRVlfSUQnXSA9IGNvbmZpZy5hd3NfczMuYWNjZXNzX2tleV9pZDtcbiAgICBwcm9jZXNzLmVudlsnQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZJ10gPSBjb25maWcuYXdzX3MzLnNlY3JldF9rZXk7XG4gIH1cblxuICAvLyBBZGQgcmVxdWVzdCBvcHRpb25zXG4gIGFwcC51c2UoKHJlcTogYW55LCByZXM6IGFueSwgbmV4dDogTmV4dEZ1bmN0aW9uKSA9PiB7XG4gICAgcmVxLnNlcnZlck9wdGlvbnMgPSBzZXJ2ZXJPcHRpb25zO1xuICAgIHJlcS5sb2dnZXIgPSBsb2dnZXI7XG4gICAgcmVxLmlvID0gaW8gYXMgYW55O1xuXG4gICAgY29uc3Qgb2xkU2VuZCA9IHJlcy5zZW5kO1xuXG4gICAgcmVzLnNlbmQgPSBhc3luYyBmdW5jdGlvbiAoZGF0YTogYW55KSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gcmVxLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddO1xuICAgICAgaWYgKGNvbnRlbnQgPT0gJ2FwcGxpY2F0aW9uL2pzb24nKSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBpZiAoIWRhdGEuc2Vzc2lvbikgZGF0YS5zZXNzaW9uID0gcmVxLmNsaWVudCA/IHJlcS5jbGllbnQuc2Vzc2lvbiA6ICcnO1xuICAgICAgICBpZiAoZGF0YS5tYXBwZXIgJiYgcmVxLnNlcnZlck9wdGlvbnMubWFwcGVyLmVuYWJsZSkge1xuICAgICAgICAgIGRhdGEucmVzcG9uc2UgPSBhd2FpdCBjb252ZXJ0KFxuICAgICAgICAgICAgcmVxLnNlcnZlck9wdGlvbnMubWFwcGVyLnByZWZpeCxcbiAgICAgICAgICAgIGRhdGEucmVzcG9uc2UsXG4gICAgICAgICAgICBkYXRhLm1hcHBlclxuICAgICAgICAgICk7XG4gICAgICAgICAgZGVsZXRlIGRhdGEubWFwcGVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXMuc2VuZCA9IG9sZFNlbmQ7XG4gICAgICByZXR1cm4gcmVzLnNlbmQoZGF0YSk7XG4gICAgfTtcbiAgICBuZXh0KCk7XG4gIH0pO1xuXG4gIGFwcC51c2Uocm91dGVzKTtcblxuICBjcmVhdGVGb2xkZXJzKCk7XG4gIGNvbnN0IGh0dHAgPSBjcmVhdGVTZXJ2ZXIoYXBwKTtcbiAgY29uc3QgaW8gPSBuZXcgU29ja2V0KGh0dHAsIHtcbiAgICBjb3JzOiB7XG4gICAgICBvcmlnaW46ICcqJyxcbiAgICB9LFxuICB9KTtcblxuICBpby5vbignY29ubmVjdGlvbicsIChzb2NrKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oYElEOiAke3NvY2suaWR9IGVudHJvdWApO1xuXG4gICAgc29jay5vbignZGlzY29ubmVjdCcsICgpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKGBJRDogJHtzb2NrLmlkfSBzYWl1YCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGh0dHAubGlzdGVuKFBPUlQsICgpID0+IHtcbiAgICBsb2dnZXIuaW5mbyhgU2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydDogJHtQT1JUfWApO1xuICAgIGxvZ2dlci5pbmZvKFxuICAgICAgYFxceDFiWzMxbSBWaXNpdCAke3NlcnZlck9wdGlvbnMuaG9zdH06JHtQT1JUfS9hcGktZG9jcyBmb3IgU3dhZ2dlciBkb2NzYFxuICAgICk7XG4gICAgbG9nZ2VyLmluZm8oYFdQUENvbm5lY3QtU2VydmVyIHZlcnNpb246ICR7dmVyc2lvbn1gKTtcblxuICAgIGlmIChzZXJ2ZXJPcHRpb25zLnN0YXJ0QWxsU2Vzc2lvbikgc3RhcnRBbGxTZXNzaW9ucyhzZXJ2ZXJPcHRpb25zLCBsb2dnZXIpO1xuICB9KTtcblxuICBpZiAoY29uZmlnLmxvZy5sZXZlbCA9PT0gJ2Vycm9yJyB8fCBjb25maWcubG9nLmxldmVsID09PSAnd2FybicpIHtcbiAgICBjb25zb2xlLmxvZyhgXFx4MWJbMzNtID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuQXR0ZW50aW9uOlxuWW91ciBjb25maWd1cmF0aW9uIGlzIGNvbmZpZ3VyZWQgdG8gc2hvdyBvbmx5IGEgZmV3IGxvZ3MsIGJlZm9yZSBvcGVuaW5nIGFuIGlzc3VlLCBcbnBsZWFzZSBzZXQgdGhlIGxvZyB0byAnc2lsbHknLCBjb3B5IHRoZSBsb2cgdGhhdCBzaG93cyB0aGUgZXJyb3IgYW5kIG9wZW4geW91ciBpc3N1ZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuYCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFwcCxcbiAgICByb3V0ZXMsXG4gICAgbG9nZ2VyLFxuICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBZ0JBLElBQUFBLFdBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLFFBQUEsR0FBQUQsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFJLG9CQUFBLEdBQUFGLHNCQUFBLENB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