"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _config = _interopRequireDefault(require("../../../config"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
//import mongoose from 'mongoose';

const mongoose = _config.default.tokenStoreType === 'mongodb' ? require('mongoose') : null;
if (_config.default.tokenStoreType === 'mongodb') {
  mongoose.Promise = global.Promise;
  const userAndPassword = _config.default.db.mongodbUser && _config.default.db.mongodbPassword ? `${_config.default.db.mongodbUser}:${_config.default.db.mongodbPassword}@` : '';
  if (!_config.default.db.mongoIsRemote) {
    mongoose.connect(`mongodb://${userAndPassword}${_config.default.db.mongodbHost}:${_config.default.db.mongodbPort}/${_config.default.db.mongodbDatabase}`, {
      useNewUrlParser: true,
      useUnifiedTopology: true
    });
  } else {
    mongoose.connect(_config.default.db.mongoURLRemote, {
      useNewUrlParser: true,
      useUnifiedTopology: true
    });
  }
}
var _default = exports.default = mongoose;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29uZmlnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJtb25nb29zZSIsImNvbmZpZyIsInRva2VuU3RvcmVUeXBlIiwiUHJvbWlzZSIsImdsb2JhbCIsInVzZXJBbmRQYXNzd29yZCIsImRiIiwibW9uZ29kYlVzZXIiLCJtb25nb2RiUGFzc3dvcmQiLCJtb25nb0lzUmVtb3RlIiwiY29ubmVjdCIsIm1vbmdvZGJIb3N0IiwibW9uZ29kYlBvcnQiLCJtb25nb2RiRGF0YWJhc2UiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJtb25nb1VSTFJlbW90ZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy91dGlsL2RiL21vbmdvZGIvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi8uLi8uLi9jb25maWcnO1xuXG5jb25zdCBtb25nb29zZSA9XG4gIGNvbmZpZy50b2tlblN0b3JlVHlwZSA9PT0gJ21vbmdvZGInID8gcmVxdWlyZSgnbW9uZ29vc2UnKSA6IG51bGw7XG5cbmlmIChjb25maWcudG9rZW5TdG9yZVR5cGUgPT09ICdtb25nb2RiJykge1xuICBtb25nb29zZS5Qcm9taXNlID0gZ2xvYmFsLlByb21pc2U7XG4gIGNvbnN0IHVzZXJBbmRQYXNzd29yZCA9XG4gICAgY29uZmlnLmRiLm1vbmdvZGJVc2VyICYmIGNvbmZpZy5kYi5tb25nb2RiUGFzc3dvcmRcbiAgICAgID8gYCR7Y29uZmlnLmRiLm1vbmdvZGJVc2VyfToke2NvbmZpZy5kYi5tb25nb2RiUGFzc3dvcmR9QGBcbiAgICAgIDogJyc7XG5cbiAgaWYgKCFjb25maWcuZGIubW9uZ29Jc1JlbW90ZSkge1xuICAgIG1vbmdvb3NlLmNvbm5lY3QoXG4gICAgICBgbW9uZ29kYjovLyR7dXNlckFuZFBhc3N3b3JkfSR7Y29uZmlnLmRiLm1vbmdvZGJIb3N0fToke2NvbmZpZy5kYi5tb25nb2RiUG9ydH0vJHtjb25maWcuZGIubW9uZ29kYkRhdGFiYXNlfWAsXG4gICAgICB7XG4gICAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICAgICAgfVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgbW9uZ29vc2UuY29ubmVjdChjb25maWcuZGIubW9uZ29VUkxSZW1vdGUsIHtcbiAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQXFDLFNBQUFELHVCQUFBRSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRHJDOztBQUdBLE1BQU1HLFFBQVEsR0FDWkMsZUFBTSxDQUFDQyxjQUFjLEtBQUssU0FBUyxHQUFHTixPQUFPLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSTtBQUVsRSxJQUFJSyxlQUFNLENBQUNDLGNBQWMsS0FBSyxTQUFTLEVBQUU7RUFDdkNGLFFBQVEsQ0FBQ0csT0FBTyxHQUFHQyxNQUFNLENBQUNELE9BQU87RUFDakMsTUFBTUUsZUFBZSxHQUNuQkosZUFBTSxDQUFDSyxFQUFFLENBQUNDLFdBQVcsSUFBSU4sZUFBTSxDQUFDSyxFQUFFLENBQUNFLGVBQWUsR0FDOUMsR0FBR1AsZUFBTSxDQUFDSyxFQUFFLENBQUNDLFdBQVcsSUFBSU4sZUFBTSxDQUFDSyxFQUFFLENBQUNFLGVBQWUsR0FBRyxHQUN4RCxFQUFFO0VBRVIsSUFBSSxDQUFDUCxlQUFNLENBQUNLLEVBQUUsQ0FBQ0csYUFBYSxFQUFFO0lBQzVCVCxRQUFRLENBQUNVLE9BQU8sQ0FDZCxhQUFhTCxlQUFlLEdBQUdKLGVBQU0sQ0FBQ0ssRUFBRSxDQUFDSyxXQUFXLElBQUlWLGVBQU0sQ0FBQ0ssRUFBRSxDQUFDTSxXQUFXLElBQUlYLGVBQU0sQ0FBQ0ssRUFBRSxDQUFDTyxlQUFlLEVBQUUsRUFDNUc7TUFDRUMsZUFBZSxFQUFFLElBQUk7TUFDckJDLGtCQUFrQixFQUFFO0lBQ3RCLENBQ0YsQ0FBQztFQUNILENBQUMsTUFBTTtJQUNMZixRQUFRLENBQUNVLE9BQU8sQ0FBQ1QsZUFBTSxDQUFDSyxFQUFFLENBQUNVLGNBQWMsRUFBRTtNQUN6Q0YsZUFBZSxFQUFFLElBQUk7TUFDckJDLGtCQUFrQixFQUFFO0lBQ3RCLENBQUMsQ0FBQztFQUNKO0FBQ0Y7QUFBQyxJQUFBRSxRQUFBLEdBQUFDLE9BQUEsQ0FBQW5CLE9BQUEsR0FFY0MsUUFBUSIsImlnbm9yZUxpc3QiOltdfQ==