"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _FileTokenStore = require("./FileTokenStore/FileTokenStore");
class FileTokenStore {
  constructor(client) {
    this.client = client;
  }
  tokenStore = new _FileTokenStore.FileTokenStore({
    encodeFunction: data => {
      return this.encodeFunction(data, this.client.config);
    },
    decodeFunction: text => {
      return this.decodeFunction(text, this.client);
    }
  });
  encodeFunction(data, config) {
    data.config = config;
    return JSON.stringify(data);
  }
  async decodeFunction(text, client) {
    const object = JSON.parse(text);
    if (object.config && Object.keys(client.config).length === 0) client.config = object.config;
    if (object.webhook && Object.keys(client.config).length === 0) client.config.webhook = object.webhook;
    return object;
  }
}
var _default = exports.default = FileTokenStore;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfRmlsZVRva2VuU3RvcmUiLCJyZXF1aXJlIiwiRmlsZVRva2VuU3RvcmUiLCJjb25zdHJ1Y3RvciIsImNsaWVudCIsInRva2VuU3RvcmUiLCJmc1Rva2VuU3RvcmUiLCJlbmNvZGVGdW5jdGlvbiIsImRhdGEiLCJjb25maWciLCJkZWNvZGVGdW5jdGlvbiIsInRleHQiLCJKU09OIiwic3RyaW5naWZ5Iiwib2JqZWN0IiwicGFyc2UiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwid2ViaG9vayIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdXRpbC90b2tlblN0b3JlL2ZpbGVUb2tlblN0b3J5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZpbGVUb2tlblN0b3JlIGFzIGZzVG9rZW5TdG9yZSB9IGZyb20gJy4vRmlsZVRva2VuU3RvcmUvRmlsZVRva2VuU3RvcmUnO1xuXG5jbGFzcyBGaWxlVG9rZW5TdG9yZSB7XG4gIGRlY2xhcmUgY2xpZW50OiBhbnk7XG4gIGNvbnN0cnVjdG9yKGNsaWVudDogYW55KSB7XG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gIH1cbiAgdG9rZW5TdG9yZSA9IG5ldyBmc1Rva2VuU3RvcmUoe1xuICAgIGVuY29kZUZ1bmN0aW9uOiAoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlRnVuY3Rpb24oZGF0YSwgdGhpcy5jbGllbnQuY29uZmlnKTtcbiAgICB9LFxuICAgIGRlY29kZUZ1bmN0aW9uOiAodGV4dCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlRnVuY3Rpb24odGV4dCwgdGhpcy5jbGllbnQpO1xuICAgIH0sXG4gIH0pO1xuXG4gIHB1YmxpYyBlbmNvZGVGdW5jdGlvbihkYXRhOiBhbnksIGNvbmZpZzogYW55KSB7XG4gICAgZGF0YS5jb25maWcgPSBjb25maWc7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlY29kZUZ1bmN0aW9uKHRleHQ6IHN0cmluZywgY2xpZW50OiBhbnkpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3Qgb2JqZWN0ID0gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgICBpZiAob2JqZWN0LmNvbmZpZyAmJiBPYmplY3Qua2V5cyhjbGllbnQuY29uZmlnKS5sZW5ndGggPT09IDApXG4gICAgICBjbGllbnQuY29uZmlnID0gb2JqZWN0LmNvbmZpZztcbiAgICBpZiAob2JqZWN0LndlYmhvb2sgJiYgT2JqZWN0LmtleXMoY2xpZW50LmNvbmZpZykubGVuZ3RoID09PSAwKVxuICAgICAgY2xpZW50LmNvbmZpZy53ZWJob29rID0gb2JqZWN0LndlYmhvb2s7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGaWxlVG9rZW5TdG9yZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBTUMsY0FBYyxDQUFDO0VBRW5CQyxXQUFXQSxDQUFDQyxNQUFXLEVBQUU7SUFDdkIsSUFBSSxDQUFDQSxNQUFNLEdBQUdBLE1BQU07RUFDdEI7RUFDQUMsVUFBVSxHQUFHLElBQUlDLDhCQUFZLENBQUM7SUFDNUJDLGNBQWMsRUFBR0MsSUFBSSxJQUFLO01BQ3hCLE9BQU8sSUFBSSxDQUFDRCxjQUFjLENBQUNDLElBQUksRUFBRSxJQUFJLENBQUNKLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDO0lBQ3RELENBQUM7SUFDREMsY0FBYyxFQUFHQyxJQUFJLElBQUs7TUFDeEIsT0FBTyxJQUFJLENBQUNELGNBQWMsQ0FBQ0MsSUFBSSxFQUFFLElBQUksQ0FBQ1AsTUFBTSxDQUFDO0lBQy9DO0VBQ0YsQ0FBQyxDQUFDO0VBRUtHLGNBQWNBLENBQUNDLElBQVMsRUFBRUMsTUFBVyxFQUFFO0lBQzVDRCxJQUFJLENBQUNDLE1BQU0sR0FBR0EsTUFBTTtJQUNwQixPQUFPRyxJQUFJLENBQUNDLFNBQVMsQ0FBQ0wsSUFBSSxDQUFDO0VBQzdCO0VBRUEsTUFBYUUsY0FBY0EsQ0FBQ0MsSUFBWSxFQUFFUCxNQUFXLEVBQXFCO0lBQ3hFLE1BQU1VLE1BQU0sR0FBR0YsSUFBSSxDQUFDRyxLQUFLLENBQUNKLElBQUksQ0FBQztJQUMvQixJQUFJRyxNQUFNLENBQUNMLE1BQU0sSUFBSU8sTUFBTSxDQUFDQyxJQUFJLENBQUNiLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLENBQUNTLE1BQU0sS0FBSyxDQUFDLEVBQzFEZCxNQUFNLENBQUNLLE1BQU0sR0FBR0ssTUFBTSxDQUFDTCxNQUFNO0lBQy9CLElBQUlLLE1BQU0sQ0FBQ0ssT0FBTyxJQUFJSCxNQUFNLENBQUNDLElBQUksQ0FBQ2IsTUFBTSxDQUFDSyxNQUFNLENBQUMsQ0FBQ1MsTUFBTSxLQUFLLENBQUMsRUFDM0RkLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDVSxPQUFPLEdBQUdMLE1BQU0sQ0FBQ0ssT0FBTztJQUN4QyxPQUFPTCxNQUFNO0VBQ2Y7QUFDRjtBQUFDLElBQUFNLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWNwQixjQUFjIiwiaWdub3JlTGlzdCI6W119